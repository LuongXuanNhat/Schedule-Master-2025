<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th·ªùi Kh√≥a Bi·ªÉu Th√¥ng Minh</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #4f46e5, #7c3aed);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .controls {
            background: #f8fafc;
            padding: 20px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
            border-bottom: 1px solid #e2e8f0;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(45deg, #4f46e5, #7c3aed);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.4);
        }

        .btn-secondary {
            background: #64748b;
            color: white;
        }

        .btn-success {
            background: #059669;
            color: white;
        }

        .btn-warning {
            background: #d97706;
            color: white;
        }

        .week-navigation {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: auto;
        }

        .search-box {
            padding: 8px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            outline: none;
            transition: border-color 0.3s;
        }

        .search-box:focus {
            border-color: #4f46e5;
        }

        .schedule-container {
            padding: 20px;
            overflow-x: auto;
        }

        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .schedule-table th {
            background: linear-gradient(45deg, #1e293b, #334155);
            color: white;
            padding: 15px 10px;
            text-align: center;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .schedule-table td {
            padding: 8px;
            border: 1px solid #e2e8f0;
            text-align: center;
            vertical-align: middle;
        }

        .time-slot {
            background: #f1f5f9;
            font-weight: 600;
            color: #334155;
            width: 120px;
        }

        .class-cell {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border-radius: 8px;
            margin: 2px;
            padding: 8px;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .class-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
        }

        .class-code {
            font-weight: bold;
            display: block;
            margin-bottom: 2px;
        }

        .class-name {
            font-size: 0.8em;
            opacity: 0.9;
            display: block;
            margin-bottom: 2px;
        }

        .class-room {
            font-size: 0.75em;
            opacity: 0.8;
            display: block;
        }

        .empty-cell {
            background: #f8fafc;
            color: #94a3b8;
            font-style: italic;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .today-highlight {
            background: linear-gradient(135deg, #059669, #047857) !important;
            border: 2px solid #10b981;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: #059669;
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .view-toggle {
            display: flex;
            background: #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }

        .view-toggle button {
            padding: 8px 16px;
            border: none;
            background: transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .view-toggle button.active {
            background: #4f46e5;
            color: white;
        }

        .calendar-view {
            display: none;
            padding: 20px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .calendar-day {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 10px;
            min-height: 100px;
            background: white;
        }

        .calendar-day.today {
            background: #eff6ff;
            border-color: #3b82f6;
        }

        .calendar-day-number {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .calendar-class {
            font-size: 0.7em;
            background: #6366f1;
            color: white;
            padding: 2px 4px;
            border-radius: 4px;
            margin: 1px 0;
            display: block;
        }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .week-navigation {
                margin-left: 0;
                justify-content: center;
            }

            .schedule-table {
                font-size: 0.8em;
            }

            .class-cell {
                font-size: 0.7em;
                padding: 4px;
            }

            .stats-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö Th·ªùi Kh√≥a Bi·ªÉu Th√¥ng Minh</h1>
            <p>Qu·∫£n l√Ω l·ªãch h·ªçc hi·ªáu qu·∫£ v√† th√¥ng minh</p>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="showToday()">üìÖ H√¥m nay</button>
            <button class="btn btn-secondary" onclick="exportSchedule()">üì• Xu·∫•t l·ªãch</button>
            <button class="btn btn-success" onclick="showNotifications()">üîî Th√¥ng b√°o</button>
            <button class="btn btn-warning" onclick="showStats()">üìä Th·ªëng k√™</button>
            
            <div class="view-toggle">
                <button class="active" onclick="switchView('table')">B·∫£ng</button>
                <button onclick="switchView('calendar')">L·ªãch</button>
            </div>

            <input type="text" class="search-box" placeholder="T√¨m ki·∫øm m√¥n h·ªçc..." onkeyup="searchClasses(this.value)">
            
            <div class="week-navigation">
                <button class="btn btn-secondary" onclick="changeWeek(-1)">‚Üê Tu·∫ßn tr∆∞·ªõc</button>
                <span id="current-week">Tu·∫ßn hi·ªán t·∫°i</span>
                <button class="btn btn-secondary" onclick="changeWeek(1)">Tu·∫ßn sau ‚Üí</button>
            </div>
        </div>

        <div class="stats-container" id="stats-container" style="display: none;">
            <div class="stat-card">
                <span class="stat-number" id="total-classes">8</span>
                <span class="stat-label">T·ªïng m√¥n h·ªçc</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="total-hours">30</span>
                <span class="stat-label">T·ªïng gi·ªù h·ªçc/tu·∫ßn</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="busiest-day">Th·ª© 2</span>
                <span class="stat-label">Ng√†y b·∫≠n nh·∫•t</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="next-class">GCOS134</span>
                <span class="stat-label">L·ªõp ti·∫øp theo</span>
            </div>
        </div>

        <div class="schedule-container" id="table-view">
            <table class="schedule-table" id="schedule-table">
                <thead>
                    <tr>
                        <th>Ti·∫øt/Ca</th>
                        <th>Th·ª© 2</th>
                        <th>Th·ª© 3</th>
                        <th>Th·ª© 4</th>
                        <th>Th·ª© 5</th>
                        <th>Th·ª© 6</th>
                        <th>Th·ª© 7</th>
                        <th>Ch·ªß nh·∫≠t</th>
                    </tr>
                </thead>
                <tbody id="schedule-body">
                </tbody>
            </table>
        </div>

        <div class="calendar-view" id="calendar-view">
            <h3>Xem theo l·ªãch th√°ng</h3>
            <div class="calendar-grid" id="calendar-grid">
            </div>
        </div>
    </div>

    <!-- Modal chi ti·∫øt m√¥n h·ªçc -->
    <div id="class-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modal-title">Chi ti·∫øt m√¥n h·ªçc</h2>
            <div id="modal-body"></div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <script>
        // D·ªØ li·ªáu th·ªùi kh√≥a bi·ªÉu t·ª´ h√¨nh ·∫£nh
        const scheduleData = [
            {
                code: 'GCOS134',
                name: 'C√°c h·ªá c∆° s·ªü d·ªØ li·ªáu',
                teacher: 'PGS.TS. Nguy·ªÖn Th·ªã Th√∫y Loan',
                day: 7, // Ch·ªß nh·∫≠t
                period: 8,
                duration: 5,
                room: 'A-06.15',
                class: '25SCT11',
                dates: '21/06/25-16/08/25'
            },
            {
                code: 'GCOS108',
                name: 'Kh√°m ph√° tri th·ª©c v√† khai th√°c d·ªØ li·ªáu',
                teacher: 'PGS.TS. V√µ ƒê√¨nh B√†y',
                day: 7,
                period: 13,
                duration: 3,
                room: 'A-06.15',
                class: '25SCT11',
                dates: '21/06/25-23/08/25'
            },
            {
                code: 'GCOS108',
                name: 'Kh√°m ph√° tri th·ª©c v√† khai th√°c d·ªØ li·ªáu',
                teacher: 'PGS.TS. V√µ ƒê√¨nh B√†y',
                day: 8, // Th·ª© 2
                period: 2,
                duration: 5,
                room: 'A-06.15',
                class: '25SCT11',
                dates: '17/08/25-31/08/25'
            },
            {
                code: 'GCOS107',
                name: 'Khai th√°c th√¥ng tin',
                teacher: 'TS. Ph·∫°m Th·∫ø Anh Ph√∫',
                day: 8,
                period: 1,
                duration: 6,
                room: 'B-13.09',
                class: '25SCT11',
                dates: '22/06/25-03/08/25'
            },
            {
                code: 'GCOS107',
                name: 'Khai th√°c th√¥ng tin',
                teacher: 'TS. Ph·∫°m Th·∫ø Anh Ph√∫',
                day: 8,
                period: 1,
                duration: 3,
                room: 'B-13.09',
                class: '25SCT11',
                dates: '10/08/25-10/08/2025'
            },
            {
                code: 'GCOS120',
                name: 'T·ªëi ∆∞u h√≥a v√† quy ho·∫°ch tuy·∫øn t√≠nh',
                teacher: 'TS. H·ªì ƒê·∫Øc Nghƒ©a',
                day: 8,
                period: 8,
                duration: 5,
                room: 'B-12.03',
                class: '25SCT11',
                dates: '22/06/25-17/08/25'
            },
            {
                code: 'GCOS114',
                name: 'X·ª≠ l√Ω ng√¥n ng·ªØ t·ª± nhi√™n',
                teacher: 'TS. L√™ Th·ªã Ng·ªçc Th∆°',
                day: 2, // Th·ª© 3
                period: 13,
                duration: 3,
                room: 'B-13.04',
                class: '25SCT11',
                dates: '23/06/25-11/08/25'
            },
            {
                code: 'GCOS114',
                name: 'X·ª≠ l√Ω ng√¥n ng·ªØ t·ª± nhi√™n',
                teacher: 'TS. L√™ Th·ªã Ng·ªçc Th∆°',
                day: 4, // Th·ª© 5
                period: 13,
                duration: 3,
                room: 'B-13.04',
                class: '25SCT11',
                dates: '25/06/25-06/08/25'
            }
        ];

        const timeSlots = [
            'Ca 1 (6:45-9:00)',
            'Ca 2 (9:20-11:35)', 
            'Ca 3 (12:30-14:45)',
            'Ca 4 (15:05-17:20)',
            'Ca 5 (18:00-20:15)'
        ];

        let currentWeekOffset = 0;
        let currentView = 'table';

        function initSchedule() {
            generateScheduleTable();
            updateCurrentWeek();
            highlightToday();
            showNotification('Ch√†o m·ª´ng! Th·ªùi kh√≥a bi·ªÉu ƒë√£ ƒë∆∞·ª£c t·∫£i th√†nh c√¥ng.', 'success');
        }

        function generateScheduleTable() {
            const tbody = document.getElementById('schedule-body');
            tbody.innerHTML = '';

            for (let slot = 0; slot < 5; slot++) {
                const row = document.createElement('tr');
                
                // C·ªôt th·ªùi gian
                const timeCell = document.createElement('td');
                timeCell.className = 'time-slot';
                timeCell.textContent = timeSlots[slot];
                row.appendChild(timeCell);

                // C√°c c·ªôt t·ª´ th·ª© 2 ƒë·∫øn ch·ªß nh·∫≠t
                for (let day = 2; day <= 8; day++) {
                    const cell = document.createElement('td');
                    const classesInSlot = findClassesInSlot(day, slot);
                    
                    if (classesInSlot.length > 0) {
                        classesInSlot.forEach(classInfo => {
                            const classDiv = document.createElement('div');
                            classDiv.className = 'class-cell';
                            classDiv.innerHTML = `
                                <span class="class-code">${classInfo.code}</span>
                                <span class="class-name">${classInfo.name}</span>
                                <span class="class-room">üìç ${classInfo.room}</span>
                            `;
                            classDiv.onclick = () => showClassDetail(classInfo);
                            cell.appendChild(classDiv);
                        });
                    } else {
                        cell.className = 'empty-cell';
                        cell.textContent = 'Tr·ªëng';
                    }
                    
                    row.appendChild(cell);
                }
                
                tbody.appendChild(row);
            }
        }

        function findClassesInSlot(day, slot) {
             return scheduleData.filter(classInfo => {
                if (classInfo.day !== day) return false;
                
                // Ki·ªÉm tra xem c√≥ ph·∫£i trong kho·∫£ng th·ªùi gian h·ªçc kh√¥ng
                if (!isClassActiveInCurrentWeek(classInfo)) return false;
                
                const startPeriod = classInfo.period;
                const endPeriod = startPeriod + classInfo.duration - 1;
                const slotStart = slot * 3 + 1;
                const slotEnd = slotStart + 2;
                
                return (startPeriod <= slotEnd && endPeriod >= slotStart);
            });
        }
        function isClassActiveInCurrentWeek(classInfo) {
            const currentDate = new Date();
            currentDate.setDate(currentDate.getDate() + (currentWeekOffset * 7));
            
            const dateRange = classInfo.dates.split('-');
            const startDate = parseVietnameseDate(dateRange[0]);
            const endDate = parseVietnameseDate(dateRange[1]);
            
            // Ki·ªÉm tra xem tu·∫ßn hi·ªán t·∫°i c√≥ n·∫±m trong kho·∫£ng th·ªùi gian h·ªçc kh√¥ng
            const weekStart = new Date(currentDate);
            weekStart.setDate(currentDate.getDate() - currentDate.getDay() + 1);
            
            const weekEnd = new Date(weekStart);
            weekEnd.setDate(weekStart.getDate() + 6);
            
            return (weekStart <= endDate && weekEnd >= startDate);
        }
        function parseVietnameseDate(dateStr) {
            const parts = dateStr.trim().split('/');
            const day = parseInt(parts[0]);
            const month = parseInt(parts[1]) - 1; // Month is 0-indexed
            const year = parseInt('20' + parts[2]); // Assuming 25 means 2025
            return new Date(year, month, day);
        }
        function showClassDetail(classInfo) {
            const modal = document.getElementById('class-modal');
            const title = document.getElementById('modal-title');
            const body = document.getElementById('modal-body');
            
            title.textContent = `${classInfo.code} - ${classInfo.name}`;
            body.innerHTML = `
                <p><strong>üë®‚Äçüè´ Gi·∫£ng vi√™n:</strong> ${classInfo.teacher}</p>
                <p><strong>üìÖ Th·ªùi gian:</strong> ${getDayName(classInfo.day)}, Ti·∫øt ${classInfo.period}-${classInfo.period + classInfo.duration - 1}</p>
                <p><strong>üè´ Ph√≤ng h·ªçc:</strong> ${classInfo.room}</p>
                <p><strong>üë• L·ªõp:</strong> ${classInfo.class}</p>
                <p><strong>üìÜ Th·ªùi gian h·ªçc:</strong> ${classInfo.dates}</p>
                <p><strong>‚è±Ô∏è S·ªë ti·∫øt:</strong> ${classInfo.duration} ti·∫øt</p>
            `;
            
            modal.style.display = 'block';
        }

        function getDayName(day) {
            const days = ['', '', 'Th·ª© 2', 'Th·ª© 3', 'Th·ª© 4', 'Th·ª© 5', 'Th·ª© 6', 'Th·ª© 7', 'Ch·ªß nh·∫≠t'];
            return days[day];
        }

        function showToday() {
            const today = new Date().getDay();
            const todayColumn = today === 0 ? 7 : today; // Ch·ªß nh·∫≠t = 0 -> 7
            
            // X√≥a highlight c≈©
            document.querySelectorAll('.today-highlight').forEach(el => {
                el.classList.remove('today-highlight');
            });
            
            // Highlight c·ªôt h√¥m nay
            const table = document.getElementById('schedule-table');
            const rows = table.rows;
            for (let i = 0; i < rows.length; i++) {
                if (rows[i].cells[todayColumn]) {
                    rows[i].cells[todayColumn].classList.add('today-highlight');
                }
            }
            
            showNotification(`ƒê√£ highlight l·ªãch h·ªçc h√¥m nay (${getDayName(todayColumn + 1)})`, 'info');
        }

        function highlightToday() {
            setTimeout(showToday, 500);
        }

        function searchClasses(searchTerm) {
            const cells = document.querySelectorAll('.class-cell');
            
            cells.forEach(cell => {
                const text = cell.textContent.toLowerCase();
                if (text.includes(searchTerm.toLowerCase())) {
                    cell.style.opacity = '1';
                    cell.style.transform = 'scale(1)';
                } else {
                    cell.style.opacity = searchTerm ? '0.3' : '1';
                    cell.style.transform = searchTerm ? 'scale(0.95)' : 'scale(1)';
                }
            });
        }

        function changeWeek(offset) {
            currentWeekOffset += offset;
            updateCurrentWeek();
            showNotification(`ƒê√£ chuy·ªÉn ${offset > 0 ? 'sang tu·∫ßn sau' : 'v·ªÅ tu·∫ßn tr∆∞·ªõc'}`, 'info');
        }

        function updateCurrentWeek() {
            const currentDate = new Date();
            currentDate.setDate(currentDate.getDate() + (currentWeekOffset * 7));
            
            const weekStart = new Date(currentDate);
            weekStart.setDate(currentDate.getDate() - currentDate.getDay() + 1);
            
            const weekEnd = new Date(weekStart);
            weekEnd.setDate(weekStart.getDate() + 6);
            
            document.getElementById('current-week').textContent = 
                `${weekStart.getDate()}/${weekStart.getMonth() + 1} - ${weekEnd.getDate()}/${weekEnd.getMonth() + 1}`;
        }

        function showStats() {
            const container = document.getElementById('stats-container');
            container.style.display = container.style.display === 'none' ? 'grid' : 'none';
            
            if (container.style.display === 'grid') {
                updateStats();
                showNotification('ƒê√£ hi·ªÉn th·ªã th·ªëng k√™ chi ti·∫øt', 'success');
            }
        }

        function updateStats() {
            const uniqueClasses = [...new Set(scheduleData.map(c => c.code))];
            const totalHours = scheduleData.reduce((sum, c) => sum + c.duration, 0) * 0.75; // 45 ph√∫t/ti·∫øt
            
            // T√¨m ng√†y b·∫≠n nh·∫•t
            const dayCount = {};
            scheduleData.forEach(c => {
                dayCount[c.day] = (dayCount[c.day] || 0) + c.duration;
            });
            const busiestDay = Object.keys(dayCount).reduce((a, b) => dayCount[a] > dayCount[b] ? a : b);
            
            document.getElementById('total-classes').textContent = uniqueClasses.length;
            document.getElementById('total-hours').textContent = Math.round(totalHours);
            document.getElementById('busiest-day').textContent = getDayName(parseInt(busiestDay));
            document.getElementById('next-class').textContent = getNextClass();
        }

        function getNextClass() {
            const now = new Date();
            const currentDay = now.getDay() === 0 ? 8 : now.getDay() + 1; // Convert to our format
            const currentHour = now.getHours();
            
            // T√¨m l·ªõp ti·∫øp theo trong ng√†y
            const todayClasses = scheduleData.filter(c => c.day === currentDay);
            for (let cls of todayClasses) {
                const classHour = getClassStartHour(cls.period);
                if (classHour > currentHour) {
                    return cls.code;
                }
            }
            
            // N·∫øu kh√¥ng c√≥ l·ªõp n√†o trong ng√†y, t√¨m l·ªõp ƒë·∫ßu ti√™n c·ªßa ng√†y mai
            const tomorrow = currentDay === 8 ? 2 : currentDay + 1;
            const tomorrowClasses = scheduleData.filter(c => c.day === tomorrow);
            if (tomorrowClasses.length > 0) {
                return tomorrowClasses[0].code;
            }
            
            return 'Kh√¥ng c√≥';
        }

        function getClassStartHour(period) {
            const timeMap = {1: 6, 4: 9, 7: 12, 10: 15, 13: 18};
            return timeMap[period] || 6;
        }

        function exportSchedule() {
            let csvContent = "M√£ m√¥n,T√™n m√¥n,Gi·∫£ng vi√™n,Ng√†y,Ti·∫øt,Ph√≤ng,L·ªõp\n";
            
            scheduleData.forEach(cls => {
                csvContent += `${cls.code},"${cls.name}","${cls.teacher}",${getDayName(cls.day)},${cls.period},${cls.room},${cls.class}\n`;
            });
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'thoi_khoa_bieu.csv';
            link.click();
            
            showNotification('ƒê√£ xu·∫•t th·ªùi kh√≥a bi·ªÉu th√†nh c√¥ng!', 'success');
        }

        function showNotifications() {
            const notifications = [
                'Nh·∫Øc nh·ªü: L·ªõp GCOS134 s·∫Ω b·∫Øt ƒë·∫ßu l√∫c 18:00 h√¥m nay',
                'Th√¥ng b√°o: Ph√≤ng h·ªçc m√¥n GCOS108 ƒë√£ thay ƒë·ªïi',
                'L·ªãch h·ªçc tu·∫ßn t·ªõi s·∫Ω c√≥ m·ªôt s·ªë ƒëi·ªÅu ch·ªânh'
            ];
            
            notifications.forEach((msg, index) => {
                setTimeout(() => showNotification(msg, 'info'), index * 1000);
            });
        }

        function switchView(view) {
            currentView = view;
            
            // Update button states
            document.querySelectorAll('.view-toggle button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Switch views
            if (view === 'table') {
                document.getElementById('table-view').style.display = 'block';
                document.getElementById('calendar-view').style.display = 'none';
            } else {
                document.getElementById('table-view').style.display = 'none';
                document.getElementById('calendar-view').style.display = 'block';
                generateCalendarView();
            }
        }

        function generateCalendarView() {
            const calendarGrid = document.getElementById('calendar-grid');
            calendarGrid.innerHTML = '';
            
            // Generate calendar for current month
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            
            // Calendar header
            const daysOfWeek = ['CN', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7'];
            daysOfWeek.forEach(day => {
                const headerDiv = document.createElement('div');
                headerDiv.style.fontWeight = 'bold';
                headerDiv.style.textAlign = 'center';
                headerDiv.style.padding = '10px';
                headerDiv.style.background = '#f1f5f9';
                headerDiv.textContent = day;
                calendarGrid.appendChild(headerDiv);
            });
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());
            
            // Generate calendar days
            for (let i = 0; i < 42; i++) { // 6 weeks
                const currentDate = new Date(startDate);
                currentDate.setDate(startDate.getDate() + i);
                
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day';
                
                if (currentDate.toDateString() === new Date().toDateString()) {
                    dayDiv.classList.add('today');
                }
                
                const dayNumber = document.createElement('div');
                dayNumber.className = 'calendar-day-number';
                dayNumber.textContent = currentDate.getDate();
                dayDiv.appendChild(dayNumber);
                
                // Add classes for this day
                const dayOfWeek = currentDate.getDay() === 0 ? 8 : currentDate.getDay() + 1;
                const classesForDay = scheduleData.filter(cls => cls.day === dayOfWeek);
                
                classesForDay.forEach(cls => {
                    const classSpan = document.createElement('span');
                    classSpan.className = 'calendar-class';
                    classSpan.textContent = cls.code;
                    classSpan.onclick = () => showClassDetail(cls);
                    dayDiv.appendChild(classSpan);
                });
                
                calendarGrid.appendChild(dayDiv);
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Modal functionality
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('class-modal');
            const closeBtn = document.querySelector('.close');
            
            closeBtn.onclick = function() {
                modal.style.display = 'none';
            }
            
            window.onclick = function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            }
            
            // Initialize schedule
            initSchedule();
            
            // Auto-refresh every minute to update "next class"
            setInterval(() => {
                if (document.getElementById('stats-container').style.display === 'grid') {
                    updateStats();
                }
            }, 60000);
            
            // Add keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey) {
                    switch(e.key) {
                        case 't':
                            e.preventDefault();
                            showToday();
                            break;
                        case 's':
                            e.preventDefault();
                            showStats();
                            break;
                        case 'e':
                            e.preventDefault();
                            exportSchedule();
                            break;
                        case 'f':
                            e.preventDefault();
                            document.querySelector('.search-box').focus();
                            break;
                    }
                }
            });
            
            // Add touch gestures for mobile
            let touchStartX = 0;
            let touchEndX = 0;
            
            document.addEventListener('touchstart', e => {
                touchStartX = e.changedTouches[0].screenX;
            });
            
            document.addEventListener('touchend', e => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            });
            
            function handleSwipe() {
                const swipeThreshold = 50;
                const diff = touchStartX - touchEndX;
                
                if (Math.abs(diff) > swipeThreshold) {
                    if (diff > 0) {
                        // Swipe left - next week
                        changeWeek(1);
                    } else {
                        // Swipe right - previous week
                        changeWeek(-1);
                    }
                }
            }
            
            // Add automatic notifications for upcoming classes
            function checkUpcomingClasses() {
                const now = new Date();
                const currentDay = now.getDay() === 0 ? 8 : now.getDay() + 1;
                const currentHour = now.getHours();
                const currentMinute = now.getMinutes();
                
                scheduleData.forEach(cls => {
                    if (cls.day === currentDay) {
                        const classStartHour = getClassStartHour(cls.period);
                        const timeDiff = (classStartHour * 60) - (currentHour * 60 + currentMinute);
                        
                        // Notify 30 minutes before class
                        if (timeDiff === 30) {
                            showNotification(`‚è∞ L·ªõp ${cls.code} s·∫Ω b·∫Øt ƒë·∫ßu trong 30 ph√∫t t·∫°i ph√≤ng ${cls.room}`, 'warning');
                        }
                        
                        // Notify 5 minutes before class
                        if (timeDiff === 5) {
                            showNotification(`üö® L·ªõp ${cls.code} s·∫Øp b·∫Øt ƒë·∫ßu! H√£y chu·∫©n b·ªã ƒë·∫øn ph√≤ng ${cls.room}`, 'error');
                        }
                    }
                });
            }
            
            // Check for upcoming classes every minute
            setInterval(checkUpcomingClasses, 60000);
            
            // Add weather widget (simulated)
            function addWeatherWidget() {
                const weatherDiv = document.createElement('div');
                weatherDiv.style.position = 'fixed';
                weatherDiv.style.top = '20px';
                weatherDiv.style.left = '20px';
                weatherDiv.style.background = 'rgba(255, 255, 255, 0.9)';
                weatherDiv.style.padding = '10px';
                weatherDiv.style.borderRadius = '8px';
                weatherDiv.style.fontSize = '0.9em';
                weatherDiv.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
                weatherDiv.innerHTML = 'üå§Ô∏è 28¬∞C - N·∫Øng nh·∫π<br>üìç TP.HCM';
                document.body.appendChild(weatherDiv);
                
                setTimeout(() => {
                    weatherDiv.style.display = 'none';
                }, 5000);
            }
            
            // Show weather after 2 seconds
            setTimeout(addWeatherWidget, 2000);
            
            // Add productivity tips
            const tips = [
                'üí° M·∫πo: S·ª≠ d·ª•ng Ctrl+T ƒë·ªÉ xem l·ªãch h·ªçc h√¥m nay',
                'üìö Nh·∫Øc nh·ªü: Chu·∫©n b·ªã t√†i li·ªáu tr∆∞·ªõc 15 ph√∫t',
                '‚è∞ G·ª£i √Ω: ƒê·∫∑t b√°o th·ª©c tr∆∞·ªõc gi·ªù h·ªçc 30 ph√∫t',
                'üéØ L·ªùi khuy√™n: Xem l·∫°i b√†i c≈© tr∆∞·ªõc khi ƒë·∫øn l·ªõp',
                'üîî Th√¥ng tin: Ki·ªÉm tra email tr∆∞·ªõc m·ªói bu·ªïi h·ªçc'
            ];
            
            function showRandomTip() {
                const randomTip = tips[Math.floor(Math.random() * tips.length)];
                showNotification(randomTip, 'info');
            }
            
            // Show random tip every 5 minutes
            setInterval(showRandomTip, 300000);
        });

        // Add study timer functionality
        let studyTimer = null;
        let studyTime = 0;
        
        function startStudyTimer() {
            if (studyTimer) return;
            
            studyTimer = setInterval(() => {
                studyTime++;
                const hours = Math.floor(studyTime / 3600);
                const minutes = Math.floor((studyTime % 3600) / 60);
                const seconds = studyTime % 60;
                
                document.title = `[${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}] Th·ªùi Kh√≥a Bi·ªÉu`;
            }, 1000);
            
            showNotification('‚è±Ô∏è ƒê√£ b·∫Øt ƒë·∫ßu t√≠nh th·ªùi gian h·ªçc', 'success');
        }
        
        function stopStudyTimer() {
            if (studyTimer) {
                clearInterval(studyTimer);
                studyTimer = null;
                document.title = 'Th·ªùi Kh√≥a Bi·ªÉu Th√¥ng Minh';
                
                const hours = Math.floor(studyTime / 3600);
                const minutes = Math.floor((studyTime % 3600) / 60);
                showNotification(`‚úÖ ƒê√£ h·ªçc ${hours}h ${minutes}m h√¥m nay!`, 'success');
                studyTime = 0;
            }
        }
        
        // Add study timer controls
        setTimeout(() => {
            const timerControls = document.createElement('div');
            timerControls.innerHTML = `
                <button class="btn btn-success" onclick="startStudyTimer()" style="margin-right: 10px;">‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu h·ªçc</button>
                <button class="btn btn-warning" onclick="stopStudyTimer()">‚èπÔ∏è D·ª´ng h·ªçc</button>
            `;
            timerControls.style.marginTop = '10px';
            document.querySelector('.controls').appendChild(timerControls);
        }, 1000);
    </script>
